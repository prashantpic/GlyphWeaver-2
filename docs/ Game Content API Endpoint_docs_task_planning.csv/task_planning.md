Title,Description,Type,Status,Priority,Assignee,Reporter,Due Date,Estimate,Labels,Sprint,Epic,Project,Attachments,Comments,Parent ID,Dependencies,Created At,Updated At,Skills Required
"Define `package.json` dependencies and metadata","Initialize an npm project and add all application dependencies (`express`, `mongoose`, `joi`, `jsonwebtoken`, `dotenv`, `cors`) and development dependencies (`typescript`, `ts-node-dev`, `@types/*`, `jest`, `supertest`) to the `package.json` file.","Configuration","Backlog","Critical","dev@project.com","pm@project.com","2024-05-24",1,"setup,config","Sprint 1","Project Foundation and Configuration","REPO-GLYPH-GAMECONTENT","package.json,package-lock.json","Risks: [RISK-001: Potential for minor dependency version conflicts upon initial setup.]. Assumptions: [All required packages are available on the public npm registry.].","US-001",,"2024-05-13 10:00","2024-05-13 10:00","npm,Node.js"
"Define npm scripts in `package.json`","Add the `start:dev`, `build`, `start`, and `test` scripts to the `scripts` section of `package.json` as specified in SDS 5.1.1.","Configuration","Backlog","Critical","dev@project.com","pm@project.com","2024-05-24",1,"setup,config","Sprint 1","Project Foundation and Configuration","REPO-GLYPH-GAMECONTENT","Updated package.json","Assumptions: [The commands for the scripts will be standard and not require complex chaining.].","US-001","TASK-101","2024-05-13 10:00","2024-05-13 10:00","npm,Node.js"
"Create and configure `tsconfig.json`","Create the `tsconfig.json` file and populate it with the key compiler options specified in SDS section 5.1.2, such as `target`, `module`, `outDir`, `rootDir`, `strict`, and `esModuleInterop`.","Configuration","Backlog","Critical","dev@project.com","pm@project.com","2024-05-24",1,"setup,config,typescript","Sprint 1","Project Foundation and Configuration","REPO-GLYPH-GAMECONTENT","tsconfig.json","Assumptions: [Standard TypeScript configuration is sufficient; no complex path mapping is needed initially.].","US-002","TASK-101","2024-05-13 10:00","2024-05-13 10:00","TypeScript"
"Implement configuration loading and validation logic","Create `src/config/index.ts`. This module will use `dotenv` to load a `.env` file. It will validate that `PORT`, `MONGODB_URI`, and `JWT_SECRET` are present, throwing an error on startup if any are missing. It will export a frozen, type-safe object with the configuration.","Development","Backlog","Critical","dev@project.com","pm@project.com","2024-05-24",3,"config,core-infra","Sprint 1","Project Foundation and Configuration","REPO-GLYPH-GAMECONTENT","src/config/index.ts","Risks: [RISK-002: Risk of secrets being handled improperly, though this task mitigates it.]. Assumptions: [dotenv library is sufficient for this stage.].","US-003","TASK-101","2024-05-13 10:00","2024-05-13 10:00","TypeScript,Node.js,dotenv"
"Write unit tests for the configuration module","Create `src/config/index.test.ts` to unit test the configuration module. Test the success path (all variables present) and the failure path (a required variable is missing). Use Jest's process.env manipulation to simulate different environments.","Testing","Backlog","Critical","dev@project.com","pm@project.com","2024-05-24",2,"testing,unit-test,config","Sprint 1","Project Foundation and Configuration","REPO-GLYPH-GAMECONTENT","src/config/index.test.ts","Assumptions: [Jest's environment variable mocking is straightforward.].","US-003","TASK-104","2024-05-13 10:00","2024-05-13 10:00","Jest,TypeScript"
"Create `.env.example` and `.gitignore` entries","Create a `.env.example` file in the root directory listing all required environment variables with placeholder values. Also, ensure `.env` and `dist/` are added to the `.gitignore` file.","Documentation","Backlog","Should Have","dev@project.com","pm@project.com","2024-05-24",0.5,"documentation,config,security","Sprint 1","Project Foundation and Configuration","REPO-GLYPH-GAMECONTENT",".env.example,.gitignore","Risks: [RISK-002: Forgetting to gitignore .env is a major security risk.].","US-004",,"2024-05-13 10:00","2024-05-13 10:00","Git"
"Implement Express app setup in `app.ts`","Create `src/app.ts`. This file will create the Express app instance, apply global middleware like `cors()` and `express.json()`, and set up a placeholder for mounting routers. The configured `app` instance will be exported.","Development","Backlog","Critical","dev@project.com","pm@project.com","2024-05-24",2,"core-infra,express","Sprint 1","Core Application and Server Setup","REPO-GLYPH-GAMECONTENT","src/app.ts","Assumptions: [Default middleware configurations are sufficient.].","US-005","TASK-101","2024-05-13 10:00","2024-05-13 10:00","Express.js,TypeScript"
"Implement Global Error Handler Middleware in `app.ts`","At the end of `src/app.ts`, add a global error-handling middleware with the signature `(err, req, res, next)`. It should inspect the error and send a standardized JSON error response with a dynamic status code (or 500 by default).","Development","Backlog","Critical","dev@project.com","pm@project.com","2024-05-24",3,"core-infra,express,error-handling","Sprint 1","Core Application and Server Setup","REPO-GLYPH-GAMECONTENT","Updated src/app.ts","Assumptions: [A simple error structure is sufficient for now.].","US-006","TASK-201","2024-05-13 10:00","2024-05-13 10:00","Express.js,TypeScript"
"Implement server.ts with DB connection and startup logic","Create `src/server.ts`. It will import `app` and `config`. It will contain an async startup function that calls `mongoose.connect()`. Upon a successful promise resolution, it will start the server with `app.listen()`. It must handle connection errors and log appropriate messages.","Development","Backlog","Critical","dev@project.com","pm@project.com","2024-05-24",4,"core-infra,database,server-init","Sprint 1","Core Application and Server Setup","REPO-GLYPH-GAMECONTENT","src/server.ts","Risks: [RISK-003: Graceful handling of DB connection failures is critical.]. Assumptions: [Mongoose connection options are standard.].","US-007","TASK-104,TASK-201","2024-05-13 10:00","2024-05-13 10:00","Node.js,Mongoose,TypeScript"
"Implement ProceduralLevel Mongoose Schema, Model, and Indexes","Create `src/data/models/procedural-level.model.ts`. Define the `IProceduralLevel` TypeScript interface. Create the `proceduralLevelSchema` using `new Schema()` with all fields, types, and required constraints from SDS 4.1. Enable timestamps. Add indexes for `playerId` and `baseLevelId` as per SDS 4.1. Export the compiled model.","Development","Backlog","Critical","dev@project.com","pm@project.com","2024-05-24",3,"data-access,mongoose,database","Sprint 1","Data Access Layer Implementation","REPO-GLYPH-GAMECONTENT","src/data/models/procedural-level.model.ts","Assumptions: [The schema is well-defined in the SDS and requires no further analysis.].","US-008","TASK-101","2024-05-13 10:00","2024-05-13 10:00","Mongoose,TypeScript,MongoDB"
"Implement ProceduralLevelRepository class and methods","Create `src/data/repositories/procedural-level.repository.ts`. The class constructor will accept the `ProceduralLevel` Mongoose model via dependency injection. Implement a `create` method that saves a new document and an `findById` method that queries by ID.","Development","Backlog","Critical","dev@project.com","pm@project.com","2024-05-24",3.8,"data-access,repository-pattern","Sprint 1","Data Access Layer Implementation","REPO-GLYPH-GAMECONTENT","src/data/repositories/procedural-level.repository.ts","Risks: [RISK-005: There's a risk of adding logic here that belongs in the service layer.]. Assumptions: [Only basic CRUD operations are needed for now.].","US-010","TASK-301","2024-05-13 10:00","2024-05-13 10:00","TypeScript,Mongoose"
"Write unit tests for ProceduralLevelRepository","Create `src/data/repositories/procedural-level.repository.test.ts`. Write unit tests for the repository methods. The Mongoose model dependency must be mocked to test the repository's logic in isolation from the database.","Testing","Backlog","Critical","dev@project.com","pm@project.com","2024-05-24",3.2,"testing,unit-test,data-access","Sprint 1","Data Access Layer Implementation","REPO-GLYPH-GAMECONTENT","src/data/repositories/procedural-level.repository.test.ts","Assumptions: [Jest's mocking capabilities are sufficient.].","US-010","TASK-302","2024-05-13 10:00","2024-05-13 10:00","Jest,TypeScript,Mongoose"
"Implement AuditService","Create `src/services/audit.service.ts` as per SDS 5.4.2. Implement the `logEvent` method to log a single-line JSON string to the console containing a timestamp, eventType, and the details object.","Development","Backlog","Should Have","dev@project.com","pm@project.com","2024-05-24",1.6,"service-layer,auditing","Sprint 1","Application Services Implementation","REPO-GLYPH-GAMECONTENT","src/services/audit.service.ts","Assumptions: [Console logging is sufficient; no external logging service integration is needed yet.].","US-011",,"2024-05-13 10:00","2024-05-13 10:00","TypeScript"
"Write unit tests for AuditService","Create `src/services/audit.service.test.ts`. Write a unit test that calls `logEvent` and spies on `console.log` to assert that it was called with the correctly formatted JSON string.","Testing","Backlog","Should Have","dev@project.com","pm@project.com","2024-05-24",1.5,"testing,unit-test,auditing","Sprint 1","Application Services Implementation","REPO-GLYPH-GAMECONTENT","src/services/audit.service.test.ts","Assumptions: [Spying on console methods in Jest is straightforward.].","US-011","TASK-401","2024-05-13 10:00","2024-05-13 10:00","Jest,TypeScript"
"Implement ProceduralLevelService business logic","Create `src/services/procedural-level.service.ts`. The service's constructor will accept the `ProceduralLevelRepository` and `AuditService` as dependencies. Implement the `registerLevel` method which takes the DTO and `playerId`, calls the repository to create the document, calls the audit service to log the event, and returns the new level's ID.","Development","Backlog","Critical","dev@project.com","pm@project.com","2024-05-24",3.5,"service-layer,business-logic","Sprint 1","Application Services Implementation","REPO-GLYPH-GAMECONTENT","src/services/procedural-level.service.ts","Risks: [RISK-005: High risk of logic bleeding into this layer from the controller or from the repository.]. Assumptions: [The business logic is a simple orchestration as described in the SDS.].","US-012","TASK-302,TASK-401,TASK-505","2024-05-13 10:00","2024-05-13 10:00","TypeScript"
"Write unit tests for ProceduralLevelService","Create `src/services/procedural-level.service.test.ts`. Mock the `ProceduralLevelRepository` and `AuditService` dependencies using Jest. Write tests to verify that `registerLevel` calls its mocked dependencies with the correct arguments and returns the expected value from the mocked repository.","Testing","Backlog","Critical","dev@project.com","pm@project.com","2024-05-24",2.7,"testing,unit-test,service-layer","Sprint 1","Application Services Implementation","REPO-GLYPH-GAMECONTENT","src/services/procedural-level.service.test.ts","Assumptions: [The service has few dependencies, making mocking straightforward.].","US-012","TASK-403","2024-05-13 10:00","2024-05-13 10:00","Jest,TypeScript"
"Implement JWT Authentication Middleware logic","Create `src/middleware/auth.middleware.ts`. The middleware function will extract the token from the `Authorization: Bearer <token>` header, verify it with `jsonwebtoken.verify()` using the `JWT_SECRET` from config, and attach the payload to `req.user`. It must handle all error cases (missing header, wrong format, verification failure).","Development","Backlog","Critical","dev@project.com","pm@project.com","2024-05-24",5,"security,authentication,middleware","Sprint 1","API Presentation Layer Implementation","REPO-GLYPH-GAMECONTENT","src/middleware/auth.middleware.ts","Risks: [RISK-002: Improper handling of JWT secret.]. Assumptions: [The JWT payload structure is simple (e.g., just `playerId`).].","US-013","TASK-104","2024-05-13 10:00","2024-05-13 10:00","Express.js,jsonwebtoken,TypeScript"
"Implement Generic Joi Validation Middleware Factory","Create `src/middleware/validation.middleware.ts`. Implement a higher-order function that takes a Joi schema as an argument and returns an Express middleware function. This returned function will validate `req.body` against the provided schema and call `next()` appropriately (with or without an error).","Development","Backlog","Should Have","dev@project.com","pm@project.com","2024-05-24",3.8,"middleware,validation,joi","Sprint 1","API Presentation Layer Implementation","REPO-GLYPH-GAMECONTENT","src/middleware/validation.middleware.ts","Risks: [RISK-008: A poorly implemented generic validator could mask specific validation issues.]. Assumptions: [Validating `req.body` is sufficient for now (no need for params or query).].","US-014","TASK-202","2024-05-13 10:00","2024-05-13 10:00","Express.js,Joi,TypeScript"
"Create DTO files for procedural levels API","Create the directory `src/api/v1/procedural-levels/dto`. Inside, create `register-level.dto.ts` and `level-instance.response.dto.ts`. Define the TypeScript interfaces in these files exactly as specified in SDS 5.3.1 and 5.3.2.","Development","Backlog","Critical","dev@project.com","pm@project.com","2024-05-24",1,"dto,api-contract,presentation-layer","Sprint 1","API Presentation Layer Implementation","REPO-GLYPH-GAMECONTENT","src/api/v1/procedural-levels/dto/register-level.dto.ts,src/api/v1/procedural-levels/dto/level-instance.response.dto.ts","Assumptions: [The DTOs are simple data structures.].","US-015",,"2024-05-13 10:00","2024-05-13 10:00","TypeScript"
"Implement Joi validation schema for registerLevel","Create `src/api/v1/procedural-levels/procedural-levels.validation.ts`. Export a Joi schema named `registerLevelSchema` that validates the structure of `RegisterLevelDto`. All fields should be marked as required. Pay attention to `generationParameters` and `solutionPath` being generic objects, but enforce that they must be objects (`RISK-008`).","Development","Backlog","Critical","dev@project.com","pm@project.com","2024-05-24",2,"validation,joi,api-contract","Sprint 1","API Presentation Layer Implementation","REPO-GLYPH-GAMECONTENT","src/api/v1/procedural-levels/procedural-levels.validation.ts","Risks: [RISK-008: Risk of schema being too lenient. Must be strict.]. Assumptions: [The structure of nested objects does not need deep validation at this stage.].","US-016","TASK-101,TASK-505","2024-05-13 10:00","2024-05-13 10:00","Joi"
"Configure Jest and add `mongodb-memory-server`","Configure `jest.config.js` with any necessary settings (e.g., test environment, setup files). Add `mongodb-memory-server` as a dev dependency. Create a global test setup file (e.g., `tests/setup.ts`).","Testing","Backlog","Should Have","dev@project.com","pm@project.com","2024-05-24",5.3,"testing,integration-test,test-setup","Sprint 1","Quality Assurance and Testing","REPO-GLYPH-GAMECONTENT","jest.config.js,Updated package.json","Risks: [RISK-004: High risk of this task taking longer than expected, blocking all integration tests.]. Assumptions: [The latest versions of all testing libraries are compatible.].","US-020","TASK-101,TASK-102","2024-05-13 10:00","2024-05-13 10:00","Jest,Node.js,MongoDB"
"Create test setup/teardown hooks for DB management","In the global test setup file, implement `beforeAll` and `afterAll` hooks. `beforeAll` will start the `MongoMemoryServer`, get its URI, and connect Mongoose. `afterAll` will stop the server and disconnect Mongoose. Also implement a `beforeEach` hook to delete all data from collections to ensure test isolation (`RISK-010`).","Testing","Backlog","Should Have","dev@project.com","pm@project.com","2024-05-24",6.5,"testing,integration-test,test-setup","Sprint 1","Quality Assurance and Testing","REPO-GLYPH-GAMECONTENT","tests/setup.ts","Risks: [RISK-004, RISK-010: Inadequate cleanup will lead to flaky tests.]. Assumptions: [Async hooks in Jest work as expected with the DB lifecycle.].","US-020","TASK-601","2024-05-13 10:00","2024-05-13 10:00","Jest,Mongoose,TypeScript"
"Write integration tests for auth middleware","Create a dedicated test file for the auth middleware. Set up a dummy protected route. Use Supertest to make requests with: a valid token, an invalid token (bad signature), an expired token, a token with a wrong secret, no token, and a malformed `Authorization` header. Assert the correct status code (200 or 401) for each case.","Testing","Backlog","Critical","dev@project.com","pm@project.com","2024-06-07",3,"testing,integration-test,security","Sprint 2","API Presentation Layer Implementation","REPO-GLYPH-GAMECONTENT","src/middleware/auth.middleware.test.ts","Assumptions: [Generating test JWTs is straightforward.].","US-013","TASK-501,TASK-601","2024-05-13 10:00","2024-05-13 10:00","Jest,Supertest"
"Write unit tests for validation middleware","Test the validation middleware factory. Create a dummy Joi schema. Call the factory to get the middleware. Then, manually invoke the middleware with mock `(req, res, next)` objects for both a valid body and an invalid body. Assert that `next()` is called correctly in each case (with or without an error argument).","Testing","Backlog","Should Have","dev@project.com","pm@project.com","2024-06-07",2.1,"testing,unit-test,middleware","Sprint 2","API Presentation Layer Implementation","REPO-GLYPH-GAMECONTENT","src/middleware/validation.middleware.test.ts","Assumptions: [Mocking Express request/response/next is straightforward in Jest.].","US-014","TASK-503","2024-05-13 10:00","2024-05-13 10:00","Jest,TypeScript,Joi"
"Implement ProceduralLevelsController `register` method","Create `src/api/v1/procedural-levels/procedural-levels.controller.ts`. Implement a `ProceduralLevelsController` class with a constructor that accepts the `ProceduralLevelService`. Create the `register` async method. It will extract `playerId` from `req.user` and the validated body from `req.body`, call the service, and then format and send the `201 Created` response. Use a try-catch block to pass errors to `next()`.","Development","Backlog","Critical","dev@project.com","pm@project.com","2024-06-07",4,"controller,presentation-layer,express","Sprint 2","API Presentation Layer Implementation","REPO-GLYPH-GAMECONTENT","src/api/v1/procedural-levels/procedural-levels.controller.ts","Risks: [RISK-005: Risk of controller containing business logic instead of delegating.]. Assumptions: [The `req.user` object structure is stable from the auth middleware.].","US-017","TASK-403,TASK-505","2024-05-13 10:00","2024-05-13 10:00","Express.js,TypeScript"
"Write unit tests for ProceduralLevelsController","Create `src/api/v1/procedural-levels/procedural-levels.controller.test.ts`. Mock the `ProceduralLevelService` dependency. Test the `register` method by mocking the `(req, res, next)` objects. Verify that the service is called with the correct arguments. Verify that `res.status` and `res.json` are called with the correct values on success. Verify that `next` is called with an error on service failure.","Testing","Backlog","Critical","dev@project.com","pm@project.com","2024-06-07",3,"testing,unit-test,controller","Sprint 2","API Presentation Layer Implementation","REPO-GLYPH-GAMECONTENT","src/api/v1/procedural-levels/procedural-levels.controller.test.ts","Assumptions: [].","US-017","TASK-507","2024-05-13 10:00","2024-05-13 10:00","Jest,TypeScript"
"Implement and configure Procedural Levels Express Router","Create `src/api/v1/procedural-levels/index.ts`. Create a new `Express.Router()`. Instantiate the controller and its dependencies (service, repository). Define the `POST /register` route, applying the `authenticate` middleware, the `validate(registerLevelSchema)` middleware, and finally the controller's `register` method. Export the router.","Development","Backlog","Critical","dev@project.com","pm@project.com","2024-06-07",3,"routing,presentation-layer,express","Sprint 2","API Presentation Layer Implementation","REPO-GLYPH-GAMECONTENT","src/api/v1/procedural-levels/index.ts","Assumptions: [Dependency injection will be done manually via constructor instantiation.].","US-018","TASK-501,TASK-503,TASK-506,TASK-507","2024-05-13 10:00","2024-05-13 10:00","Express.js"
"Mount the Procedural Levels Router in `app.ts`","In `src/app.ts`, import the newly created procedural levels router and mount it on the main `app` instance using `app.use('/api/v1/procedural-levels', proceduralLevelsRouter)`. This makes the endpoint live.","Development","Backlog","Critical","dev@project.com","pm@project.com","2024-06-07",1,"routing,core-infra","Sprint 2","API Presentation Layer Implementation","REPO-GLYPH-GAMECONTENT","Updated src/app.ts","Assumptions: [].","US-018","TASK-201,TASK-509","2024-05-13 10:00","2024-05-13 10:00","Express.js"
"Write integration test for POST /register: happy path (201)","Using Supertest, write a test case for the successful registration of a procedural level. This will involve generating a valid test JWT, creating a valid request body, making the `POST` request, and asserting a `201 Created` status. It must also assert that the response body contains the `proceduralLevelId` and then query the test database directly to confirm the data was saved correctly.","Testing","Backlog","Critical","dev@project.com","pm@project.com","2024-06-07",6,"testing,integration-test,happy-path","Sprint 2","Quality Assurance and Testing","REPO-GLYPH-GAMECONTENT","src/api/v1/procedural-levels/procedural-levels.integration.test.ts","Assumptions: [Test setup from `TASK-602` is working correctly.].","US-021","TASK-510,TASK-602","2024-05-13 10:00","2024-05-13 10:00","Jest,Supertest,MongoDB"
"Write integration test for POST /register: validation failure (400)","Using Supertest, write a series of test cases for invalid request bodies. Examples include: a missing required field (`generationSeed`), a field with the wrong data type (`complexityScore` as a string), and an empty body. For each case, assert a `400 Bad Request` status and check that the response body contains a descriptive error message.","Testing","Backlog","Critical","dev@project.com","pm@project.com","2024-06-07",5,"testing,integration-test,error-path","Sprint 2","Quality Assurance and Testing","REPO-GLYPH-GAMECONTENT","Updated src/api/v1/procedural-levels/procedural-levels.integration.test.ts","Assumptions: [].","US-021","TASK-603","2024-05-13 10:00","2024-05-13 10:00","Jest,Supertest"
"Write integration test for POST /register: authentication failure (401)","Using Supertest, write a test case for an unauthenticated request. Make the `POST` request to the endpoint without an `Authorization` header. Assert a `401 Unauthorized` status code. This verifies that the authentication middleware is correctly wired up and protecting the route.","Testing","Backlog","Critical","dev@project.com","pm@project.com","2024-06-07",3,"testing,integration-test,security","Sprint 2","Quality Assurance and Testing","REPO-GLYPH-GAMECONTENT","Updated src/api/v1/procedural-levels/procedural-levels.integration.test.ts","Assumptions: [].","US-021","TASK-603","2024-05-13 10:00","2024-05-13 10:00","Jest,Supertest"
"Create Production multi-stage Dockerfile","Create a `Dockerfile` in the project root. Use a multi-stage build. The `build` stage will use a full Node image, install all dependencies, copy source, and run `npm run build`. The final stage will use a slim Node image, copy `package.json`, `package-lock.json`, the `dist` folder from the build stage, and run `npm ci --omit=dev`. Also create a `.dockerignore` file.","Infrastructure","Backlog","Should Have","devops@project.com","pm@project.com","2024-06-07",7.5,"docker,deployment,devops","Sprint 2","Deployment and Operations","REPO-GLYPH-GAMECONTENT","Dockerfile,.dockerignore","Risks: [RISK-009: Poorly structured Dockerfile can lead to slow CI builds.]. Assumptions: [The application has no native dependencies that would complicate an Alpine-based image.].","US-022","TASK-101,TASK-102","2024-05-13 10:00","2024-05-13 10:00","Docker,Node.js"
"Create docker-compose.yml for Local Development","Create a `docker-compose.yml` file. Define two services: `app` and `mongo`. The `mongo` service will use the official `mongo` image. The `app` service will build from the local `Dockerfile` (or a dev-specific target), map the local `src` directory to the container's `src` directory as a volume, and use the `npm run start:dev` command for live-reloading. Configure environment variables and networking.","Infrastructure","Backlog","Could Have","devops@project.com","pm@project.com","2024-06-07",7.7,"docker,dev-environment,devops","Sprint 2","Deployment and Operations","REPO-GLYPH-GAMECONTENT","docker-compose.yml","Risks: [RISK-007: Configuration drift between compose file and production.]. Assumptions: [Developers have Docker and Docker Compose installed locally.].","US-023","TASK-701","2024-05-13 10:00","2024-05-13 10:00","Docker,Docker Compose"