Title,Description,Type,Status,Priority,Assignee,Reporter,Due Date,Estimate,Labels,Sprint,Epic,Project,Attachments,Comments,Parent ID,Dependencies,Created At,Updated At,Skills Required
"Create package.json and define dependencies & scripts","Initialize an npm project and populate the package.json file with all production dependencies (express, mongoose, joi, jsonwebtoken, dotenv, cors, winston) and development dependencies (typescript, ts-node, @types/*, jest, supertest). Define scripts for 'start', 'build', 'dev', and 'test'.",Configuration,Backlog,Critical,backend-dev@project.com,pm@project.com,,2.5,"setup,configuration,npm,EPIC-100","Sprint 1","Project Scaffolding & Core Services","REPO-GLYPH-PLAYER",,"Use `npm audit` after installation to check for known vulnerabilities.","US-001","",2024-08-19 10:00,2024-08-19 10:00,"npm,Node.js"
"Create and configure tsconfig.json","Create the `tsconfig.json` file. Configure compiler options: target ES2020, module CommonJS, outDir './dist', rootDir './src', strict true, esModuleInterop true, resolveJsonModule true.",Configuration,Backlog,Critical,backend-dev@project.com,pm@project.com,,2,"setup,configuration,typescript,EPIC-100","Sprint 1","Project Scaffolding & Core Services","REPO-GLYPH-PLAYER",,,"US-002","TASK-1011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"TypeScript"
"Implement centralized configuration loader module","Create `src/core/config/index.ts`. Use `dotenv` to load variables from a `.env` file. Validate the presence of PORT, MONGODB_URI, and JWT_SECRET. Export a frozen, strongly-typed config object.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,4.2,"core,configuration,env,EPIC-100","Sprint 1","Project Scaffolding & Core Services","REPO-GLYPH-PLAYER","src/core/config/index.ts,.env.example","The `.env.example` file must be kept up-to-date as a source of truth for required variables.","US-003","TASK-1011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"Node.js,TypeScript"
"Unit test configuration loader","Write unit tests for `src/core/config/index.ts`. Test the success case where all variables are present, and the failure case where a required variable is missing.",Testing,Backlog,Critical,backend-dev@project.com,pm@project.com,,1.8,"core,configuration,testing,unit-test,EPIC-100","Sprint 1","Project Scaffolding & Core Services","REPO-GLYPH-PLAYER","src/core/config/index.test.ts",,"US-003","TASK-1021-IMPL,TASK-6011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"Jest,TypeScript"
"Implement MongoDB connection module","Create `src/data/database.ts` with an async `connectDB` function. Use Mongoose to connect to the URI from the config module. Log success or failure of the connection attempt. On failure, exit the process.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,3.3,"core,database,mongoose,EPIC-100","Sprint 1","Project Scaffolding & Core Services","REPO-GLYPH-PLAYER","src/data/database.ts",,"US-004","TASK-1021-IMPL",2024-08-19 10:00,2024-08-19 10:00,"Mongoose,TypeScript"
"Write tests for database connection logic","Create tests for the `connectDB` function. Mock the Mongoose `connect` method to test both the successful connection path and the error handling path without requiring a live database.",Testing,Backlog,Critical,backend-dev@project.com,pm@project.com,,1.7,"core,database,testing,unit-test,EPIC-100","Sprint 1","Project Scaffolding & Core Services","REPO-GLYPH-PLAYER","src/data/database.test.ts",,"US-004","TASK-1022-IMPL,TASK-6011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"Jest,Mongoose,TypeScript"
"Implement custom ApiError class","Create the file `src/core/errors/ApiError.ts`. Implement a class `ApiError` that extends the built-in `Error` class. The constructor should accept `statusCode` (number) and `message` (string) and set them as public properties.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,1.8,"core,error-handling,EPIC-100","Sprint 1","Project Scaffolding & Core Services","REPO-GLYPH-PLAYER","src/core/errors/ApiError.ts",,"US-009","",2024-08-19 10:00,2024-08-19 10:00,"TypeScript"
"Unit test ApiError class","Write a simple unit test for the `ApiError` class. Verify that an instance of the class has the correct `statusCode` and `message` properties, and that `instanceof` checks work as expected.",Testing,Backlog,Critical,backend-dev@project.com,pm@project.com,,1.2,"core,error-handling,testing,unit-test,EPIC-100","Sprint 1","Project Scaffolding & Core Services","REPO-GLYPH-PLAYER","src/core/errors/ApiError.test.ts",,"US-009","TASK-1033-IMPL,TASK-6011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"Jest,TypeScript"
"Implement global error handling middleware","Create `src/core/middleware/errorHandler.middleware.ts`. Implement an Express error handling function that checks `err instanceof ApiError`, Joi errors, and defaults to a 500 internal server error. Log errors using a logger.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,5.2,"core,middleware,error-handling,EPIC-100","Sprint 1","Project Scaffolding & Core Services","REPO-GLYPH-PLAYER","src/core/middleware/errorHandler.middleware.ts","Code review must specifically check the production vs. development environment logic.","US-008","TASK-1033-IMPL,TASK-7012-IMPL",2024-08-19 10:00,2024-08-19 10:00,"Express.js,TypeScript"
"Integration test error handling middleware","Write integration tests that trigger different types of errors. Create dummy routes that throw an `ApiError`, a generic `Error`, and a Joi validation error. Use Supertest to assert that the correct HTTP status and response body are returned for each case.",Testing,Backlog,Critical,backend-dev@project.com,pm@project.com,,2.8,"core,middleware,testing,integration-test,EPIC-100","Sprint 1","Project Scaffolding & Core Services","REPO-GLYPH-PLAYER","src/core/middleware/errorHandler.integration.test.ts",,"US-008","TASK-1032-IMPL,TASK-6011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"Supertest,Jest,Express.js"
"Implement JWT authentication middleware","Create `src/core/middleware/auth.middleware.ts`. The function will extract the token from `Authorization: Bearer <token>` header, use `jwt.verify` with the secret from config to validate it, and attach the decoded payload to `req.user`. Throw an `ApiError(401, ...)` for any failure.",Development,Backlog,Critical,security-specialist@project.com,pm@project.com,,5.5,"core,middleware,security,authentication,jwt,EPIC-100","Sprint 1","Project Scaffolding & Core Services","REPO-GLYPH-PLAYER","src/core/middleware/auth.middleware.ts","JWT secret must have high entropy and be managed securely via environment variables, never committed to code.","US-007","TASK-1021-IMPL,TASK-1033-IMPL",2024-08-19 10:00,2024-08-19 10:00,"jsonwebtoken,Express.js,TypeScript"
"Unit and integration test auth middleware","Write unit tests mocking `jwt.verify` to test the middleware logic in isolation. Write integration tests with Supertest against a protected dummy route, testing with a valid token, an invalid token, an expired token, and no token.",Testing,Backlog,Critical,security-specialist@project.com,pm@project.com,,3.5,"core,middleware,testing,security,unit-test,integration-test,EPIC-100","Sprint 1","Project Scaffolding & Core Services","REPO-GLYPH-PLAYER","src/core/middleware/auth.middleware.test.ts",,"US-007","TASK-1031-IMPL,TASK-6011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"Supertest,Jest,jsonwebtoken"
"Configure structured logging with Winston","Create `src/core/logger.ts`. Configure Winston with different transports based on `process.env.NODE_ENV`. Use `winston.format.json()` for production and `winston.format.simple()` with colors for development.",Development,Backlog,Should Have,backend-dev@project.com,pm@project.com,,4.3,"core,logging,operations,winston,EPIC-100","Sprint 1","Project Scaffolding & Core Services","REPO-GLYPH-PLAYER","src/core/logger.ts",,"US-035","TASK-1011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"Winston,Node.js"
"Test logger configuration","Write a test to verify the logger's behavior. This may involve temporarily setting `NODE_ENV`, creating a logger instance, and capturing the output stream to assert its format.",Testing,Backlog,Should Have,backend-dev@project.com,pm@project.com,,1.7,"core,logging,testing,unit-test,EPIC-100","Sprint 1","Project Scaffolding & Core Services","REPO-GLYPH-PLAYER","src/core/logger.test.ts",,"US-035","TASK-7012-IMPL,TASK-6011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"Jest,Node.js"
"Define PlayerProfile Mongoose Schema","Create `src/data/models/playerProfile.model.ts`. Implement the `UserSettingsSchema` and `PlayerProfileSchema` as per the SDS, including all fields, types, defaults, and the `platformId` and `isDeleted` indexes.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,5,"player-profile,data-model,mongoose,EPIC-200","Sprint 1","Player Profile & Settings Feature","REPO-GLYPH-PLAYER","src/data/models/playerProfile.model.ts",,"US-010","",2024-08-19 10:00,2024-08-19 10:00,"Mongoose,TypeScript"
"Implement PlayerRepository","Create `src/data/repositories/player.repository.ts`. Implement a `PlayerRepository` class that uses the `PlayerProfileModel`. Include methods for `findById(id)` and `updateSettings(id, settings)`. The update method should handle partial updates to the nested settings document.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,5.2,"player-profile,repository,data-access,EPIC-200","Sprint 1","Player Profile & Settings Feature","REPO-GLYPH-PLAYER","src/data/repositories/player.repository.ts",,"US-011","TASK-2011-IMPL",2024-08-19 10:00,2024-08-19 10:00,"Mongoose,TypeScript"
"Unit test PlayerRepository","Write unit tests for the `PlayerRepository`. Mock the `PlayerProfileModel` to test the logic of `findById` and `updateSettings` without a database connection. Verify that the correct Mongoose methods are called with the correct arguments.",Testing,Backlog,Critical,backend-dev@project.com,pm@project.com,,2.8,"player-profile,repository,testing,unit-test,EPIC-200","Sprint 1","Player Profile & Settings Feature","REPO-GLYPH-PLAYER","src/data/repositories/player.repository.test.ts",,"US-011","TASK-2012-IMPL,TASK-6011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"Jest,TypeScript"
"Implement PlayerService.getProfile method","In `src/api/player/player.service.ts`, implement a `getProfile(playerId)` method. This method will call `playerRepository.findById`. If the player is not found, it will throw an `ApiError(404, 'Player not found')`. Otherwise, it will format and return the player profile data.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,3,"player-profile,service,EPIC-200","Sprint 1","Player Profile & Settings Feature","REPO-GLYPH-PLAYER","src/api/player/player.service.ts",,"US-012","TASK-2012-IMPL,TASK-1033-IMPL",2024-08-19 10:00,2024-08-19 10:00,"TypeScript"
"Implement PlayerService.updateSettings method","In `src/api/player/player.service.ts`, implement an `updateSettings(playerId, settingsDto)` method. This method will call `playerRepository.updateSettings`. If the player is not found, it will throw an `ApiError(404, 'Player not found')`. Otherwise, it returns the updated profile.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,3,"player-profile,service,EPIC-200","Sprint 1","Player Profile & Settings Feature","REPO-GLYPH-PLAYER","src/api/player/player.service.ts",,"US-012","TASK-2012-IMPL,TASK-1033-IMPL",2024-08-19 10:00,2024-08-19 10:00,"TypeScript"
"Unit test PlayerService","Write unit tests for the `PlayerService`. Mock the `PlayerRepository`. Test both `getProfile` and `updateSettings`. For each method, test the success case and the 'player not found' case where an `ApiError` should be thrown.",Testing,Backlog,Critical,backend-dev@project.com,pm@project.com,,2,"player-profile,service,testing,unit-test,EPIC-200","Sprint 1","Player Profile & Settings Feature","REPO-GLYPH-PLAYER","src/api/player/player.service.test.ts",,"US-012","TASK-2021-IMPL-GET,TASK-2021-IMPL-PUT,TASK-6011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"Jest,TypeScript"
"Implement PlayerController","Create `src/api/player/player.controller.ts`. Implement handlers `handleGetMyProfile` and `handleUpdateSettings`. These handlers will extract the `playerId` from `req.user`, call the corresponding `PlayerService` method, and send the result as a JSON response. Use try/catch to pass errors to `next()`.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,5,"player-profile,controller,express,EPIC-200","Sprint 1","Player Profile & Settings Feature","REPO-GLYPH-PLAYER","src/api/player/player.controller.ts",,"US-013","TASK-2021-IMPL-GET,TASK-2021-IMPL-PUT",2024-08-19 10:00,2024-08-19 10:00,"Express.js,TypeScript"
"Define Joi validation schema for UpdateSettingsDto","Create `src/api/player/player.validation.ts`. Define a Joi schema that validates the request body for the `PUT /me/settings` endpoint. All fields should be optional, and types/ranges should match the SDS.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,2.7,"player-profile,validation,joi,EPIC-200","Sprint 1","Player Profile & Settings Feature","REPO-GLYPH-PLAYER","src/api/player/player.validation.ts",,"US-014","",2024-08-19 10:00,2024-08-19 10:00,"Joi,TypeScript"
"Implement PlayerRouter","Create `src/api/player/player.router.ts`. Create an Express router. Define `GET /me` and `PUT /me/settings` routes. Protect both routes with `authMiddleware`. Apply the Joi validation middleware to the PUT route. Link routes to `PlayerController` handlers.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,3,"player-profile,router,express,EPIC-200","Sprint 1","Player Profile & Settings Feature","REPO-GLYPH-PLAYER","src/api/player/player.router.ts",,"US-014","TASK-2022-IMPL,TASK-1031-IMPL,TASK-2023-VALIDATION",2024-08-19 10:00,2024-08-19 10:00,"Express.js,TypeScript"
"Integration test PlayerController endpoints","Write integration tests for the player endpoints. Use Supertest to test `GET /me` and `PUT /me/settings`. Tests must set up an authenticated user, make the request, and assert the response status and body.",Testing,Backlog,Critical,backend-dev@project.com,pm@project.com,,3,"player-profile,testing,integration-test,EPIC-200","Sprint 1","Player Profile & Settings Feature","REPO-GLYPH-PLAYER","src/api/player/player.integration.test.ts",,"US-013","TASK-2023-IMPL,TASK-6011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"Supertest,Jest"
"Define PlayerInventory Mongoose Schema","Create `src/data/models/playerInventory.model.ts`. Implement the `PlayerInventorySchema` as per the SDS, including the `itemType` enum and the compound unique index on `{ userId: 1, itemId: 1 }`.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,5,"player-inventory,data-model,mongoose,EPIC-400","Sprint 1","Player Inventory Feature","REPO-GLYPH-PLAYER","src/data/models/playerInventory.model.ts",,"US-021","",2024-08-19 10:00,2024-08-19 10:00,"Mongoose,TypeScript"
"Implement PlayerInventoryRepository with atomic updates","Create `src/data/repositories/playerInventory.repository.ts`. Implement `findByPlayerId(playerId)` and a critical `updateItemQuantity(playerId, itemId, changeAmount)`. This method must use `findOneAndUpdate` with MongoDB's `$inc` operator to ensure atomic updates and prevent race conditions.",Development,Backlog,Critical,senior-backend-dev@project.com,pm@project.com,,7.5,"player-inventory,repository,data-access,atomic-operation,security-critical,EPIC-400","Sprint 1","Player Inventory Feature","REPO-GLYPH-PLAYER","src/data/repositories/playerInventory.repository.ts","Code review must be performed by a senior engineer with MongoDB experience. A specific integration test simulating concurrent requests is necessary.","US-022","TASK-4011-IMPL",2024-08-19 10:00,2024-08-19 10:00,"Mongoose,MongoDB,TypeScript"
"Unit test PlayerInventoryRepository","Write unit tests for the `PlayerInventoryRepository`. Mock the `PlayerInventoryModel`. For `updateItemQuantity`, verify that `findOneAndUpdate` is called with a query filter and an update document containing the `$inc` operator and the correct `changeAmount`.",Testing,Backlog,Critical,backend-dev@project.com,pm@project.com,,3.5,"player-inventory,repository,testing,unit-test,EPIC-400","Sprint 1","Player Inventory Feature","REPO-GLYPH-PLAYER","src/data/repositories/playerInventory.repository.test.ts",,"US-022","TASK-4012-IMPL,TASK-6011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"Jest,TypeScript"
"Implement InventoryService","Create `src/api/inventory/inventory.service.ts`. Implement `getPlayerInventory(playerId)` to fetch data from the repository. Also implement an internal-facing `updatePlayerInventory(playerId, updates)` which uses the repository's atomic `updateItemQuantity` method.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,5.2,"player-inventory,service,EPIC-400","Sprint 1","Player Inventory Feature","REPO-GLYPH-PLAYER","src/api/inventory/inventory.service.ts",,"US-023","TASK-4012-IMPL",2024-08-19 10:00,2024-08-19 10:00,"TypeScript"
"Unit test InventoryService","Write unit tests for the `InventoryService`. Mock the `PlayerInventoryRepository`. Test the `getPlayerInventory` method for both success and 'not found' cases. Test that `updatePlayerInventory` calls the repository's `updateItemQuantity` method correctly.",Testing,Backlog,Critical,backend-dev@project.com,pm@project.com,,2.8,"player-inventory,service,testing,unit-test,EPIC-400","Sprint 1","Player Inventory Feature","REPO-GLYPH-PLAYER","src/api/inventory/inventory.service.test.ts",,"US-023","TASK-4021-IMPL,TASK-6011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"Jest,TypeScript"
"Implement InventoryController","Create `src/api/inventory/inventory.controller.ts`. Implement a `handleGetInventory` handler. It will extract the `playerId` from `req.user`, call the `InventoryService`, and send the JSON response.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,3,"player-inventory,controller,express,EPIC-400","Sprint 1","Player Inventory Feature","REPO-GLYPH-PLAYER","src/api/inventory/inventory.controller.ts",,"US-024","TASK-4021-IMPL",2024-08-19 10:00,2024-08-19 10:00,"Express.js,TypeScript"
"Integration test InventoryController endpoint","Write an integration test for `GET /inventory`. Use Supertest to make an authenticated request and assert that the response is 200 OK with the correct inventory data. Also test the 404 case for a player with no inventory and the 401 case for an unauthenticated request.",Testing,Backlog,Critical,backend-dev@project.com,pm@project.com,,3,"player-inventory,testing,integration-test,EPIC-400","Sprint 1","Player Inventory Feature","REPO-GLYPH-PLAYER","src/api/inventory/inventory.integration.test.ts",,"US-024","TASK-4023-IMPL,TASK-6011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"Supertest,Jest"
"Implement InventoryRouter","Create `src/api/inventory/inventory.router.ts`. Define the `GET /` route. Protect it with the `authMiddleware`. Link the route to the `InventoryController` handler.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,3,"player-inventory,router,express,EPIC-400","Sprint 1","Player Inventory Feature","REPO-GLYPH-PLAYER","src/api/inventory/inventory.router.ts",,"US-025","TASK-4022-IMPL,TASK-1031-IMPL",2024-08-19 10:00,2024-08-19 10:00,"Express.js,TypeScript"
"Set up and configure Jest testing framework","Create a `jest.config.js` file. Configure Jest to work with TypeScript using `ts-jest`. Set up `testEnvironment: 'node'`, and configure test file matching patterns. Update the `test` script in `package.json` to run Jest.",Configuration,Backlog,Should Have,qa-engineer@project.com,pm@project.com,,6,"testing,setup,jest,EPIC-600","Sprint 1","Quality Assurance and Testing","REPO-GLYPH-PLAYER","jest.config.js",,"US-031","TASK-1011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"Jest,TypeScript,npm"
"Create main Express application file (app.ts)","Create `src/app.ts`. Initialize Express, apply `cors()`, `express.json()`, and `express.urlencoded({ extended: true })`. Mount the main API router (from `src/api/index.ts`) at the `/api/v1` prefix. Register the global `errorHandler` middleware last.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,4,"core,express,setup,EPIC-100","Sprint 2","Project Scaffolding & Core Services","REPO-GLYPH-PLAYER","src/app.ts",,"US-005","TASK-1032-IMPL,TASK-2041-IMPL",2024-08-19 10:00,2024-08-19 10:00,"Express.js,TypeScript"
"Create server entry point (server.ts)","Create `src/server.ts`. Import the `app` from `app.ts`, `config` from the config module, and `connectDB` from the database module. Write a main function that calls `connectDB()` and then `app.listen()`.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,3,"core,setup,server,EPIC-100","Sprint 2","Project Scaffolding & Core Services","REPO-GLYPH-PLAYER","src/server.ts",,"US-006","TASK-1022-IMPL,TASK-1023-IMPL",2024-08-19 10:00,2024-08-19 10:00,"Node.js,TypeScript"
"Define AuditLog Mongoose Schema","Create `src/data/models/auditLog.model.ts`. Define the schema with fields `timestamp`, `userId`, `ipAddress`, `eventType` (enum), and `details` (Mixed). Add indexes on `timestamp` (desc) and `userId` for query performance.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,4,"compliance,data-model,mongoose,audit,EPIC-100","Sprint 2","Project Scaffolding & Core Services","REPO-GLYPH-PLAYER","src/data/models/auditLog.model.ts","Peer review must explicitly verify index definitions against SDS.","US-026","",2024-08-19 10:00,2024-08-19 10:00,"Mongoose,TypeScript"
"Implement AuditService","Create `src/services/audit.service.ts`. Implement an `AuditService` class. It should have a method `logDataPrivacyAction` that accepts `playerId`, `action`, and `details`, then creates and saves a new `AuditLogModel` document.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,4,"compliance,service,audit,EPIC-100","Sprint 2","Project Scaffolding & Core Services","REPO-GLYPH-PLAYER","src/services/audit.service.ts",,"US-027","TASK-5011-IMPL",2024-08-19 10:00,2024-08-19 10:00,"Mongoose,TypeScript"
"Unit test AuditService","Write unit tests for the `AuditService`. Mock the `AuditLogModel` and its `save` method. Verify that `logDataPrivacyAction` calls the `save` method with a document containing the correct data.",Testing,Backlog,Critical,backend-dev@project.com,pm@project.com,,2,"compliance,service,testing,unit-test,audit,EPIC-100","Sprint 2","Project Scaffolding & Core Services","REPO-GLYPH-PLAYER","src/services/audit.service.test.ts",,"US-027","TASK-5012-IMPL,TASK-6011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"Jest,TypeScript"
"Implement Main API Router","Create `src/api/index.ts`. Create a new Express router. Import the feature routers (`playerRouter`, `progressRouter`, `inventoryRouter`, `dataPrivacyRouter`) and mount them on their respective base paths (`/player`, `/progress`, etc.). Export the main router.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,3,"core,router,express,setup,EPIC-200","Sprint 2","Player Profile & Settings Feature","REPO-GLYPH-PLAYER","src/api/index.ts",,"US-015","TASK-2023-IMPL,TASK-3023-IMPL,TASK-4023-IMPL,TASK-5023-IMPL",2024-08-19 10:00,2024-08-19 10:00,"Express.js,TypeScript"
"Define LevelProgress Mongoose Schema","Create `src/data/models/levelProgress.model.ts`. Implement the `LevelProgressSchema` as per the SDS. Define all fields with correct types and required flags. Critically, add the compound unique index on `{ userId: 1, levelId: 1 }`.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,5,"player-progress,data-model,mongoose,EPIC-300","Sprint 2","Player Progress Feature","REPO-GLYPH-PLAYER","src/data/models/levelProgress.model.ts",,"US-016","",2024-08-19 10:00,2024-08-19 10:00,"Mongoose,TypeScript"
"Implement LevelProgressRepository with upsert logic","Create `src/data/repositories/levelProgress.repository.ts`. Implement methods `findByPlayerId(playerId)` and `upsertProgress(playerId, progressRecord)`. The `upsertProgress` method must use `LevelProgressModel.findOneAndUpdate()` with the `{ upsert: true, new: true }` options and a filter of `{ userId: playerId, levelId: progressRecord.levelId }`.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,6.5,"player-progress,repository,data-access,atomic-operation,EPIC-300","Sprint 2","Player Progress Feature","REPO-GLYPH-PLAYER","src/data/repositories/levelProgress.repository.ts","Consider using `Promise.all` to run repository calls in parallel. For better performance, plan to refactor to a single `bulkWrite` call.","US-017","TASK-3011-IMPL",2024-08-19 10:00,2024-08-19 10:00,"Mongoose,TypeScript"
"Unit test LevelProgressRepository","Write unit tests for the `LevelProgressRepository`. Mock the `LevelProgressModel`. Test `findByPlayerId`. For `upsertProgress`, test both the insert case (document does not exist) and the update case (document exists). Verify `findOneAndUpdate` is called with the correct parameters, including the `upsert: true` option.",Testing,Backlog,Critical,backend-dev@project.com,pm@project.com,,3.5,"player-progress,repository,testing,unit-test,EPIC-300","Sprint 2","Player Progress Feature","REPO-GLYPH-PLAYER","src/data/repositories/levelProgress.repository.test.ts",,"US-017","TASK-3012-IMPL,TASK-6011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"Jest,TypeScript"
"Implement ProgressService","Create `src/api/progress/progress.service.ts`. Implement `getFullProgress(playerId)` and `synchronizeProgress(playerId, syncData)`. `synchronizeProgress` must iterate through the `syncData.progress` array and call the repository's `upsertProgress` for each item. It should then call `getFullProgress` to return the updated state.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,6.5,"player-progress,service,EPIC-300","Sprint 2","Player Progress Feature","REPO-GLYPH-PLAYER","src/api/progress/progress.service.ts",,"US-018","TASK-3012-IMPL",2024-08-19 10:00,2024-08-19 10:00,"TypeScript"
"Unit test ProgressService","Write unit tests for the `ProgressService`. Mock the `LevelProgressRepository`. For `synchronizeProgress`, provide a sample batch of data and verify that the repository's `upsertProgress` method is called the correct number of times with the correct data.",Testing,Backlog,Critical,backend-dev@project.com,pm@project.com,,3.5,"player-progress,service,testing,unit-test,EPIC-300","Sprint 2","Player Progress Feature","REPO-GLYPH-PLAYER","src/api/progress/progress.service.test.ts",,"US-018","TASK-3021-IMPL,TASK-6011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"Jest,TypeScript"
"Implement ProgressController","Create `src/api/progress/progress.controller.ts`. Implement handlers `handleGetFullProgress` and `handleSynchronizeProgress`. The handlers will extract `playerId` from `req.user`, call the `ProgressService`, and send the JSON response.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,5,"player-progress,controller,express,EPIC-300","Sprint 2","Player Progress Feature","REPO-GLYPH-PLAYER","src/api/progress/progress.controller.ts",,"US-019","TASK-3021-IMPL",2024-08-19 10:00,2024-08-19 10:00,"Express.js,TypeScript"
"Integration test ProgressController endpoints","Write integration tests for the progress endpoints. Use Supertest to test `GET /` and `POST /sync`. Tests must set up an authenticated user and assert the responses. The POST test should verify that data sent is correctly persisted in the test database.",Testing,Backlog,Critical,backend-dev@project.com,pm@project.com,,3,"player-progress,testing,integration-test,EPIC-300","Sprint 2","Player Progress Feature","REPO-GLYPH-PLAYER","src/api/progress/progress.integration.test.ts",,"US-019","TASK-3023-IMPL,TASK-6011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"Supertest,Jest"
"Define Joi validation schema for SyncProgressDto","Create `src/api/progress/progress.validation.ts`. Define a Joi schema that validates the body for the `POST /sync` endpoint. It must contain a `progress` array, and each object in the array must have the required fields (`levelId`, `bestScore`, etc.) with correct types.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,3,"player-progress,validation,joi,EPIC-300","Sprint 2","Player Progress Feature","REPO-GLYPH-PLAYER","src/api/progress/progress.validation.ts",,"US-020","",2024-08-19 10:00,2024-08-19 10:00,"Joi,TypeScript"
"Implement ProgressRouter","Create `src/api/progress/progress.router.ts`. Define the `GET /` and `POST /sync` routes. Protect both with `authMiddleware`. Apply Joi validation middleware to the POST route. Link routes to the `ProgressController` handlers.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,3,"player-progress,router,express,EPIC-300","Sprint 2","Player Progress Feature","REPO-GLYPH-PLAYER","src/api/progress/progress.router.ts",,"US-020","TASK-3022-IMPL,TASK-1031-IMPL,TASK-3023-VALIDATION",2024-08-19 10:00,2024-08-19 10:00,"Express.js,TypeScript"
"Implement DataPrivacyService","Create `src/api/data-privacy/dataPrivacy.service.ts`. Implement `requestDataExport(playerId)` which fetches data from the Player, Progress, and Inventory repositories. Implement `requestDataDeletion(playerId)` which soft-deletes the user profile by setting `isDeleted: true`. Both methods must call the `AuditService`.",Development,Backlog,Critical,senior-backend-dev@project.com,pm@project.com,,9.5,"compliance,gdpr,service,EPIC-500","Sprint 2","Data Privacy & Compliance Feature","REPO-GLYPH-PLAYER","src/api/data-privacy/dataPrivacy.service.ts","The deletion logic must be heavily scrutinized in code review to ensure all PII is handled according to policy. The `requestDataDeletion` should clearly document if it is NOT hard-deleting associated data.","US-028","TASK-5012-IMPL,TASK-2012-IMPL,TASK-3012-IMPL,TASK-4012-IMPL",2024-08-19 10:00,2024-08-19 10:00,"TypeScript,Mongoose"
"Unit test DataPrivacyService","Write unit tests for the `DataPrivacyService`. Mock all repository dependencies (`Player`, `Progress`, `Inventory`) and the `AuditService`. For `requestDataExport`, verify that all `find` methods are called. For `requestDataDeletion`, verify that the player repository's update method and the audit service's log method are called.",Testing,Backlog,Critical,backend-dev@project.com,pm@project.com,,4.5,"compliance,gdpr,service,testing,unit-test,EPIC-500","Sprint 2","Data Privacy & Compliance Feature","REPO-GLYPH-PLAYER","src/api/data-privacy/dataPrivacy.service.test.ts",,"US-028","TASK-5021-IMPL,TASK-6011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"Jest,TypeScript"
"Implement DataPrivacyController","Create `src/api/data-privacy/dataPrivacy.controller.ts`. Implement handlers `handleRequestAccess` and `handleRequestDeletion`. Handlers extract `playerId` from `req.user`, call the `DataPrivacyService`, and send the appropriate response (200 OK for access, 202 Accepted for deletion).",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,5,"compliance,gdpr,controller,express,EPIC-500","Sprint 2","Data Privacy & Compliance Feature","REPO-GLYPH-PLAYER","src/api/data-privacy/dataPrivacy.controller.ts",,"US-029","TASK-5021-IMPL",2024-08-19 10:00,2024-08-19 10:00,"Express.js,TypeScript"
"Integration test DataPrivacyController endpoints","Write integration tests for `POST /access` and `POST /delete`. Use Supertest to make authenticated requests and assert the correct HTTP status codes and response bodies. For deletion, verify the user's `isDeleted` flag is set in the test database.",Testing,Backlog,Critical,backend-dev@project.com,pm@project.com,,3,"compliance,gdpr,testing,integration-test,EPIC-500","Sprint 2","Data Privacy & Compliance Feature","REPO-GLYPH-PLAYER","src/api/data-privacy/dataPrivacy.integration.test.ts",,"US-029","TASK-5023-IMPL,TASK-6011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"Supertest,Jest"
"Implement DataPrivacyRouter","Create `src/api/data-privacy/dataPrivacy.router.ts`. Define `POST /access` and `POST /delete` routes. Protect both routes with `authMiddleware` and link them to the `DataPrivacyController` handlers.",Development,Backlog,Critical,backend-dev@project.com,pm@project.com,,3,"compliance,gdpr,router,express,EPIC-500","Sprint 2","Data Privacy & Compliance Feature","REPO-GLYPH-PLAYER","src/api/data-privacy/dataPrivacy.router.ts",,"US-030","TASK-5022-IMPL,TASK-1031-IMPL",2024-08-19 10:00,2024-08-19 10:00,"Express.js,TypeScript"
"Create multi-stage Dockerfile for production","Create a `Dockerfile` and a `.dockerignore` file. The Dockerfile will use a multi-stage build. Stage 1 (`builder`) will use a full Node.js image to install all dependencies and build the TypeScript code. Stage 2 will use a lean `node-alpine` image, copy `node_modules` (prod only) and the `dist` folder from the builder stage, and set a non-root user. The CMD will be `node dist/server.js`.",Infrastructure,Backlog,Should Have,devops@project.com,pm@project.com,,8,"deployment,docker,ops,EPIC-700","Sprint 2","Deployment and Operations","REPO-GLYPH-PLAYER","Dockerfile,.dockerignore","Use Hadolint or another Dockerfile linter in the CI pipeline to enforce best practices.","US-034","TASK-1011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"Docker,Node.js"
"Set up basic CI pipeline with GitHub Actions","Create a GitHub Actions workflow file in `.github/workflows/ci.yml`. The workflow will trigger on pushes to main/development branches. It will define a job with steps to: 1. Check out code. 2. Set up Node.js. 3. Install dependencies (`npm ci`). 4. Run linter. 5. Build the code (`npm run build`). 6. Run all tests (`npm test`).",Deployment,Backlog,Should Have,devops@project.com,pm@project.com,,12,"ci-cd,deployment,ops,github-actions,EPIC-700","Sprint 2","Deployment and Operations","REPO-GLYPH-PLAYER",".github/workflows/ci.yml","Build the pipeline incrementally, adding one step at a time. Ensure it can be debugged easily.","US-036","TASK-6011-SETUP,TASK-1011-SETUP",2024-08-19 10:00,2024-08-19 10:00,"CI/CD,YAML,GitHub Actions"
"Document CI pipeline usage","Add a section to the project's README.md explaining what the CI pipeline does, how it is triggered, and what the common failure points are. This helps onboard new developers.",Documentation,Backlog,Should Have,devops@project.com,pm@project.com,,2,"ci-cd,documentation,EPIC-700","Sprint 2","Deployment and Operations","REPO-GLYPH-PLAYER","README.md",,"US-036","TASK-7013-IMPL",2024-08-19 10:00,2024-08-19 10:00,"Markdown"