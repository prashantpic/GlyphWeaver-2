Title,Description,Type,Status,Priority,Assignee,Reporter,Due Date,Estimate,Labels,Sprint,Epic,Project,Attachments,Comments,Parent ID,Dependencies,Created At,Updated At,Skills Required
"Initialize npm and create package.json","Run `npm init` and manually populate the `package.json` file with project information and scripts for `start`, `build`, `test`, `dev`.","Configuration","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-16",1.5,"setup,configuration","Sprint 1","Core Project Setup and Foundation","Glyph Weaver - Leaderboard API","Initial package.json","Assumptions: Developer is familiar with npm init and package.json structure. Verification: Manual inspection of package.json file and running `npm run` for a script.","US-101","",2024-08-05 09:00,2024-08-05 09:00,"npm/yarn"
"Install production and development dependencies","Run `npm install` for production dependencies (express, mongoose, ioredis, joi, etc.) and `npm install --save-dev` for dev dependencies (typescript, jest, supertest, @types/*).","Configuration","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-16",2,"setup,dependencies","Sprint 1","Core Project Setup and Foundation","Glyph Weaver - Leaderboard API","Updated package.json, package-lock.json","Assumptions: NPM registry is available and network is stable. Verification: Verify `node_modules` directory is populated and `npm ls` shows installed packages.","US-101","TASK-101-1",2024-08-05 09:00,2024-08-05 09:00,"npm/yarn"
"Create and configure tsconfig.json","Create the `tsconfig.json` file and populate it with compiler options as per the SDS, including `target`, `module`, `outDir`, `rootDir`, `strict`, `esModuleInterop`, and `sourceMap`.","Configuration","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-16",3,"setup,typescript,configuration","Sprint 1","Core Project Setup and Foundation","Glyph Weaver - Leaderboard API","tsconfig.json","Assumptions: Standard TypeScript configuration is sufficient, no complex path mapping needed initially. Verification: Running `npm run build` (which executes `tsc`) must succeed without errors.","US-102","TASK-101-2",2024-08-05 09:00,2024-08-05 09:00,"TypeScript"
"Create feature and layer directories","Create the full directory tree as specified in the SDS: `src/api/leaderboards/{controllers,services,...}`. Create placeholder `.gitkeep` files in each empty directory so they can be committed to version control.","Configuration","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-16",2,"setup,architecture","Sprint 1","Core Project Setup and Foundation","Glyph Weaver - Leaderboard API","Committed directory structure","Verification: Inspecting the file system and `git status`.","US-103","",2024-08-05 09:00,2024-08-05 09:00,"Git"
"Create common middleware and main server entrypoint files","Create `src/app.ts` to set up the Express app, `src/server.ts` to start the server, `src/middleware/auth.middleware.ts` and `src/middleware/error.middleware.ts` as placeholders.","Development","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-16",2,"setup,scaffolding","Sprint 1","Core Project Setup and Foundation","Glyph Weaver - Leaderboard API","Scaffolded .ts files","Verification: File existence check.","US-103","TASK-103-1",2024-08-05 09:00,2024-08-05 09:00,"TypeScript,Express.js"
"Implement `playerScore.model.ts` schema definition","Define the Mongoose schema for `PlayerScore` with all fields (`leaderboardId`, `userId`, `scoreValue`, `metadata`, `timestamp`) and their corresponding types, refs, and required attributes as per the SDS.","Development","Backlog","Critical","sr-backend-dev@project.com","pm@project.com","2024-08-16",3,"database,model,mongoose","Sprint 1","Data Access and Persistence Layer","Glyph Weaver - Leaderboard API","playerScore.model.ts","Assumptions: Developer is proficient with Mongoose schema syntax. Verification: Code review and successful compilation.","US-201","TASK-103-1",2024-08-05 09:00,2024-08-05 09:00,"Mongoose,TypeScript"
"Define and validate compound index for `PlayerScore`","Add the critical compound index `{ leaderboardId: 1, scoreValue: -1, 'metadata.completionTime': 1, timestamp: 1 }` to the `playerScore` schema. Also add the index for `{ userId: 1, leaderboardId: 1 }`.","Development","Backlog","Critical","sr-backend-dev@project.com","pm@project.com","2024-08-16",3.7,"database,performance,indexing","Sprint 1","Data Access and Persistence Layer","Glyph Weaver - Leaderboard API","Updated playerScore.model.ts","Risks: RISK-001. Assumptions: The defined index is optimal for the planned queries. Verification: Code review. Integration tests for leaderboard fetching must be analyzed with `.explain()` to confirm index usage. Mitigations: Mandatory peer review by a senior developer or someone with strong MongoDB experience. Create a specific integration test task to verify index usage.","US-201","TASK-201-1",2024-08-05 09:00,2024-08-05 09:00,"Mongoose,MongoDB Indexing"
"Define TypeScript interface for `IPlayerScore`","In `leaderboard.interfaces.ts`, define the `IPlayerScore` interface that represents the document structure, extending `mongoose.Document`.","Development","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-16",1.2,"typing,typescript,model","Sprint 1","Data Access and Persistence Layer","Glyph Weaver - Leaderboard API","Updated leaderboard.interfaces.ts, Updated playerScore.model.ts","Verification: Code review and type checking by `tsc`.","US-201","TASK-201-1,TASK-301-1",2024-08-05 09:00,2024-08-05 09:00,"TypeScript,Mongoose"
"Implement `leaderboard.model.ts` schema and index","Create the Mongoose schema for `Leaderboard` with all specified fields. Add a unique index on the `keyName` field to ensure programmatic keys are unique.","Development","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-16",3,"database,model,mongoose","Sprint 1","Data Access and Persistence Layer","Glyph Weaver - Leaderboard API","leaderboard.model.ts","Verification: Code review and compilation.","US-202","TASK-103-1",2024-08-05 09:00,2024-08-05 09:00,"Mongoose,TypeScript"
"Define TypeScript interface for `ILeaderboard`","In `leaderboard.interfaces.ts`, define the `ILeaderboard` interface that represents the document structure, extending `mongoose.Document`.","Development","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-16",1.2,"typing,typescript,model","Sprint 1","Data Access and Persistence Layer","Glyph Weaver - Leaderboard API","Updated leaderboard.interfaces.ts, Updated leaderboard.model.ts","Verification: Code review and `tsc`.","US-202","TASK-202-1,TASK-301-1",2024-08-05 09:00,2024-08-05 09:00,"TypeScript,Mongoose"
"Scaffold `ScoreRepository` class","Create the `score.repository.ts` file. Define the `ScoreRepository` class implementing `IScoreRepository`. Set up the constructor to inject the Mongoose `PlayerScoreModel`.","Development","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-16",2,"repository,database,scaffolding","Sprint 1","Data Access and Persistence Layer","Glyph Weaver - Leaderboard API","Scaffolded score.repository.ts","Verification: Code review.","US-203","TASK-201-3,TASK-301-1",2024-08-05 09:00,2024-08-05 09:00,"TypeScript,Mongoose"
"Implement `findByLeaderboard` method in `ScoreRepository`","Implement the logic to query scores. This must dynamically construct the `sort` object from the `tieBreakingFields` array passed in, and apply `skip` and `limit` for pagination.","Development","Backlog","Critical","sr-backend-dev@project.com","pm@project.com","2024-08-16",6.3,"repository,query,database","Sprint 1","Data Access and Persistence Layer","Glyph Weaver - Leaderboard API","Completed `findByLeaderboard` method","Risks: RISK-001. Assumptions: The structure of `tieBreakingFields` is consistent. Verification: Unit tests and integration tests will verify the sorting and pagination logic. Mitigations: Write unit tests with multiple different tie-breaking configurations.","US-203","TASK-203-1",2024-08-05 09:00,2024-08-05 09:00,"Mongoose,MongoDB Query Optimization"
"Implement `getPlayerRank` method in `ScoreRepository`","Implement the logic to calculate a player's rank. First, fetch the player's own score. Then, use `countDocuments` with a query for scores greater than the player's score. Handle tie-breaking by adding to the query.","Development","Backlog","Critical","sr-backend-dev@project.com","pm@project.com","2024-08-16",7.5,"repository,query,database,algorithm","Sprint 1","Data Access and Persistence Layer","Glyph Weaver - Leaderboard API","Completed `getPlayerRank` method","Risks: RISK-002. Assumptions: The `countDocuments` approach is performant enough and an aggregation pipeline is not needed. Verification: Extensive unit tests covering various tie-breaking scenarios. Mitigations: Use a TDD approach for this specific method. Have a senior developer review the query logic specifically.","US-203","TASK-203-1",2024-08-05 09:00,2024-08-05 09:00,"Mongoose,MongoDB Query Optimization"
"Write unit tests for `ScoreRepository`","Create a `score.repository.test.ts` file. Write Jest unit tests for all methods in the `ScoreRepository`. Use `jest.mock()` to mock the Mongoose `PlayerScoreModel` and its chainable query methods.","Testing","Backlog","Critical","qa-engineer@project.com","pm@project.com","2024-08-16",6.5,"testing,unit-test,jest","Sprint 1","Data Access and Persistence Layer","Glyph Weaver - Leaderboard API","score.repository.test.ts","Risks: RISK-002. Verification: Running `npm test` and achieving >80% code coverage for the file.","US-203","TASK-203-2,TASK-203-3",2024-08-05 09:00,2024-08-05 09:00,"Jest,Mocking,TypeScript"
"Implement `LeaderboardRepository`","Create `leaderboard.repository.ts` and implement the `LeaderboardRepository` class with the `findByKeyName` method using the Mongoose model's `findOne`.","Development","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-16",3,"repository,database","Sprint 1","Data Access and Persistence Layer","Glyph Weaver - Leaderboard API","leaderboard.repository.ts","Verification: Unit tests.","US-204","TASK-202-2,TASK-301-1",2024-08-05 09:00,2024-08-05 09:00,"Mongoose,TypeScript"
"Implement `PlayerRepository`","Create `player.repository.ts` and implement the `PlayerRepository`. The `findManyByIds` method should use `find({ _id: { $in: userIds } })` and transform the result into a Map for efficient lookups. The `setLeaderboardExclusion` method will use `updateOne`.","Development","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-16",6,"repository,database","Sprint 1","Data Access and Persistence Layer","Glyph Weaver - Leaderboard API","player.repository.ts","Assumptions: A `PlayerProfile` model is available or will be created by another team. Verification: Unit tests.","US-204","TASK-301-1",2024-08-05 09:00,2024-08-05 09:00,"Mongoose,TypeScript"
"Write unit tests for `LeaderboardRepository` and `PlayerRepository`","Create test files for the new repositories. Use Jest to mock the Mongoose models and verify that the correct Mongoose methods are called with the expected parameters.","Testing","Backlog","Critical","qa-engineer@project.com","pm@project.com","2024-08-16",8.3,"testing,unit-test,jest","Sprint 1","Data Access and Persistence Layer","Glyph Weaver - Leaderboard API","leaderboard.repository.test.ts, player.repository.test.ts","Verification: Running `npm test`.","US-204","TASK-204-1,TASK-204-2",2024-08-05 09:00,2024-08-05 09:00,"Jest,Mocking,TypeScript"
"Implement `AuditLogRepository`","Create a simple `AuditLogRepository` with a `create` method to persist audit log documents. This will be used by the AuditService.","Development","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-16",1.5,"repository,database,auditing","Sprint 1","Data Access and Persistence Layer","Glyph Weaver - Leaderboard API","audit.model.ts, audit.repository.ts, Updated leaderboard.interfaces.ts","Verification: Unit tests.","US-204","TASK-301-1",2024-08-05 09:00,2024-08-05 09:00,"Mongoose,TypeScript"
"Create `leaderboard.interfaces.ts` with all service contracts","Create the `leaderboard.interfaces.ts` file and define all interfaces specified in the SDS: `ILeaderboardService`, `IScoreRepository`, `ILeaderboardRepository`, `IPlayerRepository`, `ICheatDetectionService`, `ICacheProvider`, `IAuditService`.","Development","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-16",4.2,"architecture,typescript,interface,di","Sprint 1","Application Logic Layer","Glyph Weaver - Leaderboard API","leaderboard.interfaces.ts","Assumptions: The SDS provides a complete and accurate list of required interfaces. Verification: Code review and successful compilation by other modules that use these interfaces.","US-301","TASK-103-1",2024-08-05 09:00,2024-08-05 09:00,"TypeScript"
"Create DTO files and definitions","Create the three DTO files (`submit-score.dto.ts`, `leaderboard-view.dto.ts`, `leaderboard-entry.dto.ts`) and define their structures as TypeScript classes or interfaces.","Development","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-16",3,"dto,api-contract,typescript","Sprint 1","Application Logic Layer","Glyph Weaver - Leaderboard API","submit-score.dto.ts, leaderboard-view.dto.ts, leaderboard-entry.dto.ts","Verification: Code review and successful compilation.","US-302","TASK-103-1",2024-08-05 09:00,2024-08-05 09:00,"TypeScript"
"Implement `CheatDetectionService` with checksum validation","Create the `CheatDetectionService` class. Implement the hash validation logic in `isScoreValid` using `crypto.createHmac`. The secret key must be loaded from `process.env.SCORE_SECRET`.","Development","Backlog","Critical","sr-backend-dev@project.com","pm@project.com","2024-08-16",5.2,"service,security,validation","Sprint 1","Application Logic Layer","Glyph Weaver - Leaderboard API","cheatDetection.service.ts","Risks: RISK-003, RISK-007. Assumptions: The client and server will agree on the exact string-to-be-hashed format. Verification: Unit tests. Mitigations: Use a pre-commit hook to prevent committing secrets. Create a shared test case or utility to verify client/server hash alignment.","US-303","TASK-301-1",2024-08-05 09:00,2024-08-05 09:00,"TypeScript,Node.js Crypto"
"Add score bounding validation to `CheatDetectionService`","Enhance the `isScoreValid` method to fetch the `associatedLevelId` from the leaderboard, use a `LevelRepository` to get the level's `maxPossibleScore`, and reject any submission where `submission.score > maxPossibleScore`.","Development","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-16",3.2,"service,security,validation","Sprint 1","Application Logic Layer","Glyph Weaver - Leaderboard API","Updated cheatDetection.service.ts","Assumptions: `ILevelRepository` will be provided and works as expected. Verification: Unit tests with mocked `ILevelRepository`.","US-303","TASK-303-1",2024-08-05 09:00,2024-08-05 09:00,"TypeScript"
"Write unit tests for `CheatDetectionService`","Create tests for `isScoreValid`, covering all validation logic. Test cases should include: correct hash, incorrect hash, valid score, score > max, and a submission that passes all checks.","Testing","Backlog","Critical","qa-engineer@project.com","pm@project.com","2024-08-16",6,"testing,unit-test,jest,security","Sprint 1","Application Logic Layer","Glyph Weaver - Leaderboard API","cheatDetection.service.test.ts","Risks: RISK-003. Verification: `npm test` and code coverage report.","US-303","TASK-303-2",2024-08-05 09:00,2024-08-05 09:00,"Jest,Mocking"
"Implement `AuditService`","Create `audit.service.ts`. Implement the `AuditService` class with methods `logScoreSubmission` and `logSuspiciousActivity`. These methods will construct a standardized log object and pass it to the injected `IAuditLogRepository`'s `create` method.","Development","Backlog","Should Have","backend-dev@project.com","pm@project.com","2024-08-16",3,"service,auditing,logging","Sprint 1","Application Logic Layer","Glyph Weaver - Leaderboard API","audit.service.ts","Assumptions: `IAuditLogRepository` is available and works as expected. Verification: Unit tests.","US-304","TASK-301-1,TASK-204-4",2024-08-05 09:00,2024-08-05 09:00,"TypeScript"
"Write unit tests for `AuditService`","Create tests for the `AuditService`. Mock the `IAuditLogRepository` and verify that its `create` method is called with a correctly structured payload for each log type.","Testing","Backlog","Should Have","qa-engineer@project.com","pm@project.com","2024-08-16",3,"testing,unit-test,jest","Sprint 1","Application Logic Layer","Glyph Weaver - Leaderboard API","audit.service.test.ts","Verification: `npm test`.","US-304","TASK-304-1",2024-08-05 09:00,2024-08-05 09:00,"Jest,Mocking"
"Scaffold `LeaderboardService` and inject dependencies","Create `leaderboard.service.ts` with the `LeaderboardService` class implementing `ILeaderboardService`. The constructor should inject all required dependencies.","Development","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-16",3,"service,architecture,di","Sprint 1","Application Logic Layer","Glyph Weaver - Leaderboard API","Scaffolded leaderboard.service.ts","Verification: Code review.","US-305","TASK-301-1,TASK-203-1,TASK-204-1,TASK-204-2,TASK-303-1,TASK-304-1,TASK-501-1",2024-08-05 09:00,2024-08-05 09:00,"TypeScript"
"Implement `getLeaderboardView` with cache-aside logic","Implement the `getLeaderboardView` method. It must first attempt to get data from the cache. On a miss, it must fetch data from the `ScoreRepository` and `PlayerRepository`, construct the `LeaderboardViewDto`, set the data in the cache with a TTL, and then return the DTO.","Development","Backlog","Critical","sr-backend-dev@project.com","pm@project.com","2024-08-16",8.2,"service,caching,performance","Sprint 1","Application Logic Layer","Glyph Weaver - Leaderboard API","Completed `getLeaderboardView` method","Risks: RISK-004. Assumptions: The PlayerRepository's `findManyByIds` is efficient. Verification: Unit tests that mock dependencies to test both cache hit and miss scenarios.","US-305","TASK-305-1",2024-08-05 09:00,2024-08-05 09:00,"TypeScript,Async/Await"
"Implement `processScoreSubmission` with validation and cache invalidation","Implement the `processScoreSubmission` method. It must call `cheatDetectionService.isScoreValid`, log the attempt via `auditService`, throw an error if invalid, save the score via `scoreRepository.create`, invalidate the cache, and return the new rank.","Development","Backlog","Critical","sr-backend-dev@project.com","pm@project.com","2024-08-16",8.5,"service,caching,security,workflow","Sprint 1","Application Logic Layer","Glyph Weaver - Leaderboard API","Completed `processScoreSubmission` method","Risks: RISK-003, RISK-004. Verification: Unit tests covering the full orchestration flow for both success and failure cases. Mitigations: Use a robust cache invalidation strategy.","US-305","TASK-305-1",2024-08-05 09:00,2024-08-05 09:00,"TypeScript,Async/Await"
"Write unit tests for `LeaderboardService`","Create `leaderboard.service.test.ts`. Write comprehensive unit tests for `LeaderboardService`, mocking all its dependencies. Test the cache hit/miss logic for `getLeaderboardView` and the full success/fail workflow for `processScoreSubmission`.","Testing","Backlog","Critical","qa-engineer@project.com","pm@project.com","2024-08-16",7.2,"testing,unit-test,jest,service","Sprint 1","Application Logic Layer","Glyph Weaver - Leaderboard API","leaderboard.service.test.ts","Verification: `npm test` and code coverage report.","US-305","TASK-305-2,TASK-305-3",2024-08-05 09:00,2024-08-05 09:00,"Jest,Mocking,TypeScript"
"Implement `CacheProvider` with ioredis","Create `cache.provider.ts`. Implement the `CacheProvider` class with a constructor that initializes an `ioredis` client from `process.env.REDIS_URL`. Implement the `get`, `set` (with `EX` option for TTL), and `invalidate` (`del`) methods.","Development","Backlog","Should Have","devops-engineer@project.com","pm@project.com","2024-08-16",6,"provider,infrastructure,caching,redis","Sprint 1","Infrastructure and Cross-Cutting Concerns","Glyph Weaver - Leaderboard API","cache.provider.ts","Assumptions: A Redis instance is available for development. Verification: Unit tests and integration tests.","US-501","TASK-301-1",2024-08-05 09:00,2024-08-05 09:00,"Redis,ioredis,TypeScript"
"Implement robust pattern-based cache invalidation","This MUST NOT use the `KEYS` command. Instead, implement a strategy using Redis Sets. When a paginated key is cached, add it to a set for that leaderboard (e.g., `SADD leaderboard_keys:global_scores cache_key`). Invalidation will then use `SMEMBERS` and `DEL`.","Development","Backlog","Should Have","sr-backend-dev@project.com","pm@project.com","2024-08-16",6.5,"provider,caching,redis,performance","Sprint 1","Infrastructure and Cross-Cutting Concerns","Glyph Weaver - Leaderboard API","Updated cache.provider.ts","Risks: RISK-004, RISK-005. Verification: Unit tests mocking `ioredis` and integration tests. Mitigations: Mandatory code review to ensure `KEYS` is not used.","US-501","TASK-501-1",2024-08-05 09:00,2024-08-05 09:00,"Redis,ioredis"
"Write unit tests for `CacheProvider`","Test the `CacheProvider`'s methods. Use a mocking library to mock the `ioredis` client and confirm that the correct Redis commands (`get`, `set`, `del`, `sadd`, `smembers`) are called.","Testing","Backlog","Should Have","qa-engineer@project.com","pm@project.com","2024-08-16",3,"testing,unit-test,jest","Sprint 1","Infrastructure and Cross-Cutting Concerns","Glyph Weaver - Leaderboard API","cache.provider.test.ts","Verification: `npm test`.","US-501","TASK-501-2",2024-08-05 09:00,2024-08-05 09:00,"Jest,Mocking"
"Implement `jwtAuth` middleware","In `auth.middleware.ts`, create the `jwtAuth` middleware. It should extract the token from the `Bearer` token in the `Authorization` header, verify it using `jsonwebtoken.verify`, and attach the decoded payload to `req.user`.","Development","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-16",6.2,"middleware,security,authentication,jwt","Sprint 1","Infrastructure and Cross-Cutting Concerns","Glyph Weaver - Leaderboard API","auth.middleware.ts","Risks: RISK-007. Assumptions: The `JWT_SECRET` is provided via environment variables. Verification: Integration tests. Mitigations: Ensure `JWT_SECRET` is not hardcoded and is loaded from `.env`.","US-502","TASK-103-2",2024-08-05 09:00,2024-08-05 09:00,"Express.js,jsonwebtoken"
"Implement `adminOnly` middleware","In `auth.middleware.ts`, create the `adminOnly` middleware. It must be placed after `jwtAuth` in the route chain. It checks if `req.user.role === 'admin'`. If not, it sends a 403 Forbidden response.","Development","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-16",3.2,"middleware,security,authorization","Sprint 1","Infrastructure and Cross-Cutting Concerns","Glyph Weaver - Leaderboard API","Updated auth.middleware.ts","Assumptions: The JWT payload will contain a `role` field. Verification: Integration tests.","US-502","TASK-502-1",2024-08-05 09:00,2024-08-05 09:00,"Express.js,TypeScript"
"Write integration tests for auth middleware","Create a dedicated set of integration tests for authentication and authorization. Create mock endpoints protected by `jwtAuth` and `adminOnly`. Test with no token, a bad token, a valid user token, and a valid admin token.","Testing","Backlog","Critical","qa-engineer@project.com","pm@project.com","2024-08-16",4.6,"testing,integration-test,security","Sprint 1","Infrastructure and Cross-Cutting Concerns","Glyph Weaver - Leaderboard API","auth.integration.test.ts","Verification: `npm test`.","US-502","TASK-502-1,TASK-502-2",2024-08-05 09:00,2024-08-05 09:00,"supertest,Jest,jsonwebtoken"
"Implement Joi validation schema for score submission","In `leaderboard.validator.ts`, create the `submitScoreSchema` using Joi. It must validate all fields in `SubmitScoreDto` with the specified constraints (e.g., `number`, `integer`, `min`, `hex`, `length`).","Development","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-30",3.2,"validation,joi,api","Sprint 2","API Presentation Layer","Glyph Weaver - Leaderboard API","leaderboard.validator.ts","Verification: Unit tests for the schema.","US-401","TASK-302-1",2024-08-05 09:00,2024-08-05 09:00,"Joi,TypeScript"
"Implement `submitScore` method in `LeaderboardController`","Implement the `submitScore` async method in the controller. It will extract `leaderboardKey`, `userId` (from `req.user`), and the submission DTO from the request, then call `leaderboardService.processScoreSubmission`.","Development","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-30",4.2,"controller,api,express","Sprint 2","API Presentation Layer","Glyph Weaver - Leaderboard API","Completed `submitScore` in leaderboard.controller.ts","Verification: Integration tests.","US-401","TASK-403-1,TASK-305-3",2024-08-05 09:00,2024-08-05 09:00,"Express.js,TypeScript"
"Define `POST /:leaderboardKey/scores` route","In `leaderboard.routes.ts`, define the `POST` route for submitting scores. Apply the `jwtAuth` middleware and the Joi validation middleware (`validate(submitScoreSchema)`) before mapping it to the `submitScore` controller method.","Development","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-30",2.1,"routing,api,express","Sprint 2","API Presentation Layer","Glyph Weaver - Leaderboard API","Updated leaderboard.routes.ts","Verification: Integration tests.","US-401","TASK-401-1,TASK-401-2,TASK-502-1",2024-08-05 09:00,2024-08-05 09:00,"Express.js"
"Implement `getLeaderboard` method in `LeaderboardController`","Implement the `getLeaderboard` method. It should extract `leaderboardKey` from params and `limit`/`offset` from query, parse them to numbers with defaults, and call `leaderboardService.getLeaderboardView`.","Development","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-30",4.2,"controller,api,express","Sprint 2","API Presentation Layer","Glyph Weaver - Leaderboard API","Completed `getLeaderboard` in leaderboard.controller.ts","Verification: Integration tests.","US-402","TASK-403-1,TASK-305-2",2024-08-05 09:00,2024-08-05 09:00,"Express.js,TypeScript"
"Define `GET /:leaderboardKey` route","In `leaderboard.routes.ts`, define the `GET` route for retrieving a leaderboard. Apply the `jwtAuth` middleware and map it to the `getLeaderboard` controller method.","Development","Backlog","Critical","backend-dev@project.com","pm@project.com","2024-08-30",1.5,"routing,api,express","Sprint 2","API Presentation Layer","Glyph Weaver - Leaderboard API","Updated leaderboard.routes.ts","Verification: Integration tests.","US-402","TASK-403-1,TASK-402-1,TASK-502-1",2024-08-05 09:00,2024-08-05 09:00,"Express.js"
"Scaffold `LeaderboardController` and router","Create the `leaderboard.controller.ts` file with the `LeaderboardController` class and its constructor for injecting the service. Also create `leaderboard.routes.ts` with an empty Express router.","Development","Backlog","Should Have","backend-dev@project.com","pm@project.com","2024-08-30",3,"controller,routing,scaffolding","Sprint 2","API Presentation Layer","Glyph Weaver - Leaderboard API","leaderboard.controller.ts, leaderboard.routes.ts","Verification: Code review.","US-403","TASK-103-1,TASK-301-1",2024-08-05 09:00,2024-08-05 09:00,"Express.js,TypeScript"
"Implement `getPlayerRank` in `LeaderboardController` and route","Implement the `getPlayerRank` controller method to get the user's rank from the service. Also, define the `GET /:leaderboardKey/rank/me` route and apply `jwtAuth` middleware.","Development","Backlog","Should Have","backend-dev@project.com","pm@project.com","2024-08-30",5,"controller,api,routing","Sprint 2","API Presentation Layer","Glyph Weaver - Leaderboard API","Updated controller and router files.","Verification: Integration tests.","US-403","TASK-403-1",2024-08-05 09:00,2024-08-05 09:00,"Express.js,TypeScript"
"Implement `excludePlayer` controller method and route","Implement the `excludePlayer` method in the controller. Define the `POST /admin/players/:userId/exclude` route and protect it with both `jwtAuth` and `adminOnly` middleware.","Development","Backlog","Should Have","backend-dev@project.com","pm@project.com","2024-08-30",5,"controller,api,routing,admin","Sprint 2","API Presentation Layer","Glyph Weaver - Leaderboard API","Updated controller and router files.","Verification: Integration tests using both admin and non-admin tokens.","US-404","TASK-403-1,TASK-502-2",2024-08-05 09:00,2024-08-05 09:00,"Express.js,TypeScript"
"Set up integration test environment with Docker Compose","Create a `docker-compose.test.yml` file to orchestrate the test environment. It should define services for the API, a MongoDB instance, and a Redis instance.","Infrastructure","Backlog","Should Have","devops-engineer@project.com","pm@project.com","2024-08-30",10.3,"testing,integration-test,docker","Sprint 2","Quality Assurance and Testing","Glyph Weaver - Leaderboard API","docker-compose.test.yml","Risks: RISK-006. Assumptions: The team has experience with Docker and Docker Compose. Verification: Successfully running the compose file and observing logs for successful connections. Mitigations: Start this task early in the project lifecycle.","US-603","TASK-701-1",2024-08-05 09:00,2024-08-05 09:00,"Docker,Docker Compose"
"Implement test setup and teardown logic","In the integration test suite, implement `beforeAll`, `afterAll`, and `beforeEach` hooks. `beforeEach` will clean all test data from MongoDB collections and flush the Redis cache to ensure test isolation.","Testing","Backlog","Should Have","qa-engineer@project.com","pm@project.com","2024-08-30",6.7,"testing,integration-test,jest","Sprint 2","Quality Assurance and Testing","Glyph Weaver - Leaderboard API","Test helper file or hooks within the test suite.","Risks: RISK-008. Verification: Running multiple tests in a suite and confirming they all pass consistently. Mitigations: Use a separate test database and Redis database to avoid conflicts.","US-603","TASK-603-1",2024-08-05 09:00,2024-08-05 09:00,"Jest,Mongoose,ioredis"
"Write integration tests for the full leaderboard workflow","Using `supertest`, implement tests that cover the primary user journey. This includes: POSTing several scores, then GETting the leaderboard to verify order and content, and GETting a user's personal rank.","Testing","Backlog","Should Have","qa-engineer@project.com","pm@project.com","2024-08-30",12,"testing,integration-test,supertest","Sprint 2","Quality Assurance and Testing","Glyph Weaver - Leaderboard API","leaderboard.integration.test.ts","Risks: RISK-001, RISK-002, RISK-004, RISK-008. Assumptions: The auth middleware tests are separate; here we can use helper functions to generate valid tokens. Verification: `npm test` and successful runs in the CI pipeline. Mitigations: Isolate tests carefully using the setup/teardown logic.","US-603","TASK-603-2,TASK-401-3,TASK-402-2,TASK-403-2",2024-08-05 09:00,2024-08-05 09:00,"supertest,Jest,TypeScript"
"Develop multi-stage `Dockerfile` for production","Create a `Dockerfile` with at least two stages. A 'builder' stage that installs dependencies and runs `npm run build`. A final 'production' stage that copies only production `node_modules` and the `dist` folder from the builder.","Infrastructure","Backlog","Should Have","devops-engineer@project.com","pm@project.com","2024-08-30",8.3,"docker,deployment,ci-cd","Sprint 2","Deployment and Operations","Glyph Weaver - Leaderboard API","Dockerfile, .dockerignore file","Risks: RISK-010. Assumptions: The team has access to a container registry. Verification: Building the image and running a container from it. `docker history` can be used to inspect layers. Mitigations: Integrate an image scanner like Trivy into a CI pipeline.","US-701","TASK-101-2,TASK-102-1",2024-08-05 09:00,2024-08-05 09:00,"Docker,Node.js"